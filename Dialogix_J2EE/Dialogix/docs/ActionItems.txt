Optional Tasks
[ ] Map to XForms
[ ] Map to eDCI model
[ ] Map to VoiceXML
[ ] Review ISO 11179 metadata issues - should any be  added to what we have?
[ ] Expose all key SQL queries (see Debugging Notes) from front-end for testing purposes
[ ] Contact AHIMA re: workflow used for ASPE project
[ ] Switch to org.dialogix.parser, using Data_Element as base class (since has InstrumentContent information)
[ ] Can RawData tables be processed to load instruments into new model (e.g. Perl-ify everything first, then process resulting Db, rather than Perl straight to new model?)
[ ] Remove all references to DialogixLogger, ScheduleList, ScheduleSource, ScheduleInfo
[ ] Should I move all DatumMath into Datum?

Lingering WishList
[.] Replace wave6users table? (Study - user, instrument - will then point to InstrumentSession?) - will require review of all special functions within the instrument - NOTE, when loaded it, there were several errors!
	username
	password
	filename =>  session
	instrument => instrument_version
	status => (unstarted, working - really based on session status!)
	startingStep => ?? really part of instrumentVersion?
	_clinpass => ?? really part of instrument?
	Dem1 => should really be a username issue
	lastAccess => delete
	currentStep => delete - part of session
	currentIP => 
	lastAction =>
	sessionID => remove
	browser => 
	statusMsg
	ID
	
	[ ] Can I use this modeling to let me support current approach:
	  - Studies like Wave7
	  - Anonymous ones like CET (list of instruments?)
	  - List of available instruments (anonymous)
	  - List of working instruments
	    - __FILENAME__	- just part of datafile (?) so don't need it as part of instrument_sessions
	    - __TITLE_FOR_PICKLIST_WHEN_IN_PROGRESS__ - add this to instrument_sessions?
	  = Study metadata (name, grant, contact, etc.) - like a properties file
	
[. ] What is lift to remove Datum and use DataElement within Parser?
[ ] Create master list of all instruments, especially those for which data has been collected (so can load to them based upon consistent Hashmap - may require query against RawData tables = see find/regex in DebuggingNotes.txt
[ ] Replace VersionIF and related @@ variables with loadable properties. - @Resources
[ ] Call ApelonExporter from front-end (not just on-load) - consider storing results in database column
[ ] Assess "Mismatch across languages" errors - sign of imporper normalization? - will want to know ID of of AnswerList which is trying to be reset
[ ] Upload instruments via Upload button
[ ] Create WriteNode() equivalent which doesn't use legacy Node and Datum elements
[ ] Create Navigation methods which get collection of InstrumentContent for next, previous, etc.
[ ] Replace all workflow with JSP pointing to new model
[ ] Can it deploy to Tomcat?
[ ] What about local install (e.g. replace current flat-file model with CSV database - what are implications for Perl code? - StelsCSV JDBC Looks good http://www.csv-jdbc.com/ - I'd probably want to create a new "table" or "tablespace" per instrument session to support that mode? - each JDBC connection would be to a different path for the data collection model (but what are implications for then merging those data back into a centralized database?)
[ ] DataExporter - support export to winzip (requires different source output - open new window with type="application/zip" (what is proper syntax?)
[ ] test whether item.responseLatency & responseDuration are working correctly for IE and Mozilla (test all timing information - still seems off)
[ ] Identify problem with duplicate entries in AnswerList (and others)?
[ ] Manage logins (try using PHP model with cookies?)
[ ] Re-tests ability to save data to flat files - ideally using JDBC:CVS (so manage configuration via properties - may want to write to both Mysql and CSV - can I use an interceptor to write to both?)


---
Priorities
[B ] Once a data element is flagged as missing a required value, it never resets itself even if have entered proper response
[B ] Validate restore - both to full model, and also to internal Schedule, Node, etc. locations
  [ ] Restore from database, but then probably have to create internal Schedule, Node, etc.
  [ ] Restore from .jar or .dat+.dat.evt combo to load into database
[ ] Google Analytics to track position? (or should it wait for  JSP?)
[ ] LoginTricepsServlet - what is lift to run Wave7 off of new models?
[. ] Back-load Wave7 data into new model? - would have to be from working and jar files - Does restore from .jar load everything needed into V1?
[ ] Glassfish on www.dialogix.org:8080, but with multiple instantiations (e.g. does current system work OK under glassfish instead of Tomcat?)
[ ] How do I automate backup of InnoDB database?
[ ] Study Management Front-End
  [ ] Study home page - design DB to store info needed for home page, assuming static location for images (vs. databased)?
  [ ] Study-level security of instrument access
  [ ] Load wave6_users into new study tables
  [ ] JSP for Logn letting user view list of available instruments to start or resume?
  [ ] JSP for Study Manager letting them view completion status of instruments
  [ ] JSP for Clinical Reviewer - view cases needing completion
  [ ] Change suspendToFloppy to use floppy_dir to assign to different study?
[ ] Management Tool
  [ ] Workable login process, filtering data by study
  [ ] Ideally build menus dynamically, but can still be static HTML links
[ ] Assigning data to a study as opposed to anonymous
[ ] Securing access to an instrument (e.g. must be signed in and anonymous not allowed?)

[ ] JSF vs. JSP to finish work - which will be easier to maintain (e.g. add login capabilities to JSP?)
[ ] Review Struts, Spring, or related model instead of JSF?
[ ] Assess "Mismatch across languages" errors - sign of imporper normalization? - will want to know ID of of AnswerList which is trying to be reset
[ ] pageUsage:  first page_usage row should say from_group 0 to_group 1 (now 1=>1)
[ ] Pageuage:  page_visit wrong
[ ] Need nullFlavorChange which indicates whether the value really changed in an Ok2Ok situtation?
[ ] instrument_session.current_var_num and current_group - should they be updated pre-asking or post-asking?
[ ] Should change in language trigger a page event?
[ ] What happens to data from sessions which are missing starting values?  Will I see "UNASKED?" = this is a JSP issue, not core to the model
[ ] Ensure all parser tests process correctly - especially regex

-- Replacing org.dianexus.triceps.* --
*AnswerChoice:  (value, message, anchor, wrapMessage(), value_parsed, message_parsed) => how used?
Datum: DONE
DatumMath:  DONE
DialogixLogger => remove
Evidence:
* (a) functions => Functions.java [ ] fix the ones which are missing
 (b) createReserveds, initReserveds) => need to know defaults for reserveds, else Dialogix3 is fine. 
 (c) init => 
 (d) dao for data => remove
 (e) dao for nodes => remove
EvidenceIO => remove
ExcelDecoder => replace with regex?; remove, since part of instrumentLoader
InputEncoder => replace?
JarWriter => replace?
Node:
  --
Parser: DONE
Schedule: 
*	set default reserveds, => [ ] put defaults into reserved_word table
	load from source or db, => DONE
	bracesMatch => DONE in instrumentLoader
	prepareDataLogging => DONE (replaced)
	parseNode => DONE in instrumentLoader
	getNode => DONE  
	parseReserved => DONE in instrumentloader
	writeReserved => ?? where is getReserved?
	overloadReserved => ?? what does this do? 
	setReserved => ?? separate those which have side-effects
		STARTING_STEP => n/a
		START_TIME => n/a
		CURRENT_LANGUAGE => n/a, except for side-effects (which side-effects are  really needed?)
	setLanguages => DONE in instrumentLoader
	setLanguage => n/a
*	recalculateInNewLanguage - reparse all eval nodes ([ ] review this!)
	
	- in general, use getDAO to access Datum values for any variable, including reserveds from Schedule
ScheduleList:  replace it (but need different way to deal with unjarring)
ScheduleSource:  replace it
SourceInfo:  replace it
Triceps:
  --
TricepsEngine:
  --
*Value:  (node, datum, time) (like itemUsage) - how is this used?
*VersionIF:  replace it - should some be moved to RESERVED_WORDS?
  These are study specific
	
XMLString:  ?? Move to utility?
*	[DONE] remove dependency upon Triceps object - only used for localized strings
	- what is best way to deal with localized strings?  Throw an error message or add them to a queue for later processing?


--

TRUNCATE item_usage ;
TRUNCATE data_element ;
TRUNCATE page_usage_event ;
TRUNCATE page_usage ;
TRUNCATE instrument_session ;

drop table if exists test.jvm_test;
create table test.jvm_test as
select 
	b.instrument_id,
	a.*
from dialogix_j2ee.page_usage as a, dialogix_j2ee.instrument_version as b, dialogix_j2ee.instrument_session as c
where a.instrument_session_id = c.instrument_session_id 
	and c.instrument_version_id = b.instrument_version_id
order by
	a.time_stamp, b.instrument_version_id;
	
ALTER TABLE `jvm_test`
  DROP `status_msg`,
  DROP `ip_address`,
  DROP `browser`;	
  
---
Functions listed within Wave7 - so this is OK other than suspendToFloppy
isNA()
__FILENAME__
__TITLE_FOR_PICKLIST_WHEN_IN_PROGRESS__
count()
suspendToFlopppy(NDconfirm_subject);	// where does this put things - could I just declare the "suspend" or "archive" directory as a new domainspace?  If so, must search just in that space - Presently, this is ignored
list()
desc()
getAnsOption()  